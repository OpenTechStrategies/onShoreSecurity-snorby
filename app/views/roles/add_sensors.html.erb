<%= snorby_box("Add sensor to #{@role.name}", false) do %>

<table class="default" id="addSensorTable" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <th>Name</th>
    <th>Ip</th>
    <th>Sensors</th>
    <th>Last Event</th>
    <th>Event Count</th>
    <th>Event %</th>
    <th></th>
  </tr>
  <tbody class='sensors'>
    <%= render :partial => 'roles/sensor', :locals => {:sensor=> Sensor.root} %>
    <%= render :partial => 'roles/sensor', :collection => @sensors %>
  </tbody>
</table>
<% end %>

<script type="text/javascript">
  var role_id = <%= @role.id %>;
  $(document).ready(function()  {
    $("#addSensorTable").treeTable();
    $('table#addSensorTable tbody.sensors #sensor_1').toggleBranch()
    var elements = $('table#addSensorTable tbody.sensors').children('.folder').not('.ui-helper-hidden').not("#sensor_1");
    for (var i = 0; i < elements.length; i++){
      $(elements[i]).toggleBranch();
    }
  });
  $('#addSensorTable a').each(function(index, value){
    $(value).attr('onClick', "$(this).find('img').attr('src', '/images/icons/pager.gif');");
  });
</script>
